"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = require("./index");
/**
 * mostly static utility functions to assist supertype in handling statsd operations
 */
var StatsdHelper = /** @class */ (function () {
    function StatsdHelper() {
    }
    /**
     * convert node time format hrtime to milliseconds
     * @param {hrTime} hrTime
     * @returns {number}
     */
    StatsdHelper.convertHRTimeToMilliseconds = function (hrTime) {
        return hrTime[0] * 1000 + hrTime[1] / 1000000;
    };
    /**
     * given a start time and a key, record the total amount of time and send stat info.
     * @param {hrTime} hrTimeStart
     * @param {string} statsKey
     * @param tags
     */
    StatsdHelper.computeTimingAndSend = function (hrTimeStart, statsKey, tags) {
        var statsdClient = index_1.SupertypeSession.statsdClient;
        if (statsdClient
            && statsdClient.timing
            && typeof statsdClient.timing === 'function') {
            var timerEndTime = process.hrtime(hrTimeStart);
            var totalTimeInMilliseconds = this.convertHRTimeToMilliseconds(timerEndTime);
            statsdClient.timing(statsKey, totalTimeInMilliseconds, tags);
        }
    };
    return StatsdHelper;
}());
exports.StatsdHelper = StatsdHelper;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3RhdHNkSGVscGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL1N0YXRzZEhlbHBlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlDQUEyQztBQU0zQzs7R0FFRztBQUNIO0lBQUE7SUE2QkEsQ0FBQztJQTNCRzs7OztPQUlHO0lBQ1csd0NBQTJCLEdBQXpDLFVBQTBDLE1BQWM7UUFDcEQsT0FBTyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUM7SUFDbEQsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ1csaUNBQW9CLEdBQWxDLFVBQW1DLFdBQW1CLEVBQUUsUUFBZ0IsRUFBRSxJQUFLO1FBQzNFLElBQU0sWUFBWSxHQUFHLHdCQUFnQixDQUFDLFlBQVksQ0FBQztRQUVuRCxJQUFHLFlBQVk7ZUFDUixZQUFZLENBQUMsTUFBTTtlQUNuQixPQUFPLFlBQVksQ0FBQyxNQUFNLEtBQUssVUFBVSxFQUFFO1lBRTlDLElBQU0sWUFBWSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDakQsSUFBTSx1QkFBdUIsR0FBRyxJQUFJLENBQUMsMkJBQTJCLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDL0UsWUFBWSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsdUJBQXVCLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDaEU7SUFDTCxDQUFDO0lBQ0wsbUJBQUM7QUFBRCxDQUFDLEFBN0JELElBNkJDO0FBN0JZLG9DQUFZIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3VwZXJ0eXBlU2Vzc2lvbiB9IGZyb20gJy4vaW5kZXgnO1xuXG4vLyBmb3JtYXQgZm9yIGhydGltZVxuLy8gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9wcm9jZXNzLmh0bWwjcHJvY2Vzc19wcm9jZXNzX2hydGltZV90aW1lXG50eXBlIGhyVGltZSA9IFtudW1iZXIsIG51bWJlcl07XG5cbi8qKlxuICogbW9zdGx5IHN0YXRpYyB1dGlsaXR5IGZ1bmN0aW9ucyB0byBhc3Npc3Qgc3VwZXJ0eXBlIGluIGhhbmRsaW5nIHN0YXRzZCBvcGVyYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBTdGF0c2RIZWxwZXIge1xuXG4gICAgLyoqXG4gICAgICogY29udmVydCBub2RlIHRpbWUgZm9ybWF0IGhydGltZSB0byBtaWxsaXNlY29uZHNcbiAgICAgKiBAcGFyYW0ge2hyVGltZX0gaHJUaW1lXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGNvbnZlcnRIUlRpbWVUb01pbGxpc2Vjb25kcyhoclRpbWU6IGhyVGltZSk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBoclRpbWVbMF0gKiAxMDAwICsgaHJUaW1lWzFdIC8gMTAwMDAwMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnaXZlbiBhIHN0YXJ0IHRpbWUgYW5kIGEga2V5LCByZWNvcmQgdGhlIHRvdGFsIGFtb3VudCBvZiB0aW1lIGFuZCBzZW5kIHN0YXQgaW5mby5cbiAgICAgKiBAcGFyYW0ge2hyVGltZX0gaHJUaW1lU3RhcnRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3RhdHNLZXlcbiAgICAgKiBAcGFyYW0gdGFnc1xuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgY29tcHV0ZVRpbWluZ0FuZFNlbmQoaHJUaW1lU3RhcnQ6IGhyVGltZSwgc3RhdHNLZXk6IHN0cmluZywgdGFncz8pOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc3RhdHNkQ2xpZW50ID0gU3VwZXJ0eXBlU2Vzc2lvbi5zdGF0c2RDbGllbnQ7XG5cbiAgICAgICAgaWYoc3RhdHNkQ2xpZW50XG4gICAgICAgICAgICAmJiBzdGF0c2RDbGllbnQudGltaW5nXG4gICAgICAgICAgICAmJiB0eXBlb2Ygc3RhdHNkQ2xpZW50LnRpbWluZyA9PT0gJ2Z1bmN0aW9uJykge1xuXG4gICAgICAgICAgICBjb25zdCB0aW1lckVuZFRpbWUgPSBwcm9jZXNzLmhydGltZShoclRpbWVTdGFydCk7XG4gICAgICAgICAgICBjb25zdCB0b3RhbFRpbWVJbk1pbGxpc2Vjb25kcyA9IHRoaXMuY29udmVydEhSVGltZVRvTWlsbGlzZWNvbmRzKHRpbWVyRW5kVGltZSk7XG4gICAgICAgICAgICBzdGF0c2RDbGllbnQudGltaW5nKHN0YXRzS2V5LCB0b3RhbFRpbWVJbk1pbGxpc2Vjb25kcywgdGFncyk7XG4gICAgICAgIH1cbiAgICB9XG59Il19